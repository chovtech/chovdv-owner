name: 🚀 Deploy to SmartWeb via SFTP

on:
  push:
    branches:
      - main  # or "master", depending on your default branch

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: 📥 Checkout Repository
        uses: actions/checkout@v3

      # If you don't need to install dependencies like Composer, you can skip this step
      # If you have build scripts for your project, you can run them here
      
      - name: 🏗️ Build Project (optional)
        run: |
          # Add commands to build your project if necessary
          # For example, if you are generating static content or have assets to build, run those commands here.
          # Example:
          # npm run build (for JS apps)
          # Or skip if there's nothing to build.
      - name: 📤 Deploy to SmartWeb via FTP
        uses: appleboy/scp-action@v0.1.7

        with:
          server: ${{ secrets.SFTP_HOST }}               # Replace with your FTP server secret
          username: ${{ secrets.SFTP_USERNAME }}         # Replace with your FTP username secret
          password: ${{ secrets.SFTP_PASSWORD }}         # Replace with your FTP password secret
          port: ${{ secrets.SFTP_PORT }}                 # Optional, specify port if needed
          local-dir: ./                                 # The directory with your files to deploy
          server-dir: /public_html/dev.edumess.com/     # The directory on your server where files should go
