name: üöÄ Deploy to SmartWeb via SFTP

on:
  push:
    branches:
      - main  # or "master", depending on your default branch

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: üì• Checkout Repository
        uses: actions/checkout@v3

      # If you don't need to install dependencies like Composer, you can skip this step
      # If you have build scripts for your project, you can run them here
      - name: üèóÔ∏è Build Project (optional)
        run: |
          # Add commands to build your project if necessary
          # For example, if you are generating static content or have assets to build, run those commands here.
          # Example:
          # npm run build (for JS apps)
          # Or skip if there's nothing to build.

      - name: üì§ Deploy to SmartWeb via SFTP
        uses: appleboy/scp-action@v0.1.7
        with:
          host: ${{ secrets.SFTP_HOST }}                # Replace with your server's host or IP
          username: ${{ secrets.SFTP_USERNAME }}        # Your SFTP username
          password: ${{ secrets.SFTP_PASSWORD }}        # Your SFTP password
          port: ${{ secrets.SFTP_PORT }}                # Optional, specify port if needed (default is 22)
          source: ./                                    # The local directory to upload
          target: /public_html/dev.edumess.com/         # The remote directory on the server
          timeout: 30s
          command_timeout: 10m
          use_insecure_cipher: false
          rm: false
          debug: false
          strip_components: 0
          overwrite: false
          tar_dereference: false
          tar_exec: tar
