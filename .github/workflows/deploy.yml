name: 🚀 Deploy to SmartWeb via SFTP

on:
  push:
    branches:
      - main  # or "master", depending on your default branch

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: 📥 Checkout Repository
        uses: actions/checkout@v3

      # If you don't need to install dependencies like Composer, you can skip this step
      # If you have build scripts for your project, you can run them here
      
      - name: 🏗️ Build Project (optional)
        run: |
          # Add commands to build your project if necessary
          # For example, if you are generating static content or have assets to build, run those commands here.
          # Example:
          # npm run build (for JS apps)
          # Or skip if there's nothing to build.
      - name: 📤 Deploy to SmartWeb via FTP
        uses: appleboy/scp-action@v0.1.7
        with:
          host: ${{ secrets.SFTP_SERVER }}           # Ensure 'host' is set correctly to your server's address
          username: ${{ secrets.SFTP_USERNAME }}
          password: ${{ secrets.SFTP_PASSWORD }}
          port: 22                                   # If you're using the default SSH port
          source: ./                                  # Local directory to upload
          target: /public_html/dev.edumess.com/      # Remote directory to upload to
          timeout: 30s
          command_timeout: 10m
          use_insecure_cipher: false
          rm: false
          debug: false
          strip_components: 0
          overwrite: false
          tar_dereference: false
          tar_exec: tar
                  overwrite: false
                  tar_dereference: false
                  tar_exec: tar
           # The directory on your server where files should go
